@{
    ViewBag.Title = "经销商订货";
    Enterprise enterprise = ViewBag.Enterprise;
    List<Product> list = ViewBag.List;
}
<div class="alert alert-success" role="alert">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    经销商——<strong>@(enterprise.Name)</strong>订货
</div>


<form class="form-horizontal" method="post" action="">
    <table id="list" class="table table-bordered">
        <thead>
            <tr>

                <th>产品型号</th>
                <th>数量</th>
                <th>成交单价</th>
                <th style="width:70px;"><a href="#" class="text-success" id="btn-add"><i class="glyphicon glyphicon-plus"></i></a></th>
            </tr>
        </thead>
        <tbody>
            <tr>

                <td>
                    <select name="PID" class="form-control">
                        @foreach (var item in list)
                        {
                            <option value="@(item.ID)">@(item.Number) ￥@(Math.Round(item.Price, 4))</option>
                        }
                    </select>
                </td>
                <td>
                    <input type="text" name="Number" class="form-control" />
                </td>
                <td>
                    <input type="text" name="Price" class="form-control" />
                </td>
                <td>
                    <a href="#delete" class="btn btn-danger btn-xs btn-delete"><i class="fa fa-remove"></i></a>
                </td>
            </tr>
        </tbody>
    </table>
    <button type="submit" class="btn btn-info" style="float:right;"><i class="glyphicon glyphicon-ok"></i>确定</button>
</form>

<script>
    $(function () {
        var template = $("#list tbody").html();
        rebindDelete();

        $("#btn-add").click(function () {
            $("#list tbody").append(template);
            rebindDelete();
        });

        function rebindDelete() {
            $("#list .btn-delete").unbind("click").bind("click", function () {
                var tr = $(this).parents("tr");
                tr.remove();
                return false;
            });
        }
    })
</script>
